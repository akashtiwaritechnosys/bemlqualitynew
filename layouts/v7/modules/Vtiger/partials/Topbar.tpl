{*+**********************************************************************************
* The contents of this file are subject to the vtiger CRM Public License Version 1.1
* ("License"); You may not use this file except in compliance with the License
* The Original Code is: vtiger CRM Open Source
* The Initial Developer of the Original Code is vtiger.
* Portions created by vtiger are Copyright (C) vtiger.
* All Rights Reserved.
************************************************************************************}

{* strip removed *}
{include file="modules/Vtiger/Header.tpl"}

{assign var=APP_IMAGE_MAP value=Vtiger_MenuStructure_Model::getAppIcons()}
<nav class="navbar navbar-inverse navbar-fixed-top app-fixed-navbar">
	<div class="container-fluid global-nav search-cont">
		<div class="row">
			<div class="left-navbar">
				<div id="toggle-container" class="col-sm-1 col-xs-1 cursorPointer">
					<div class="row btn-pin-toggle hamburger is-sm is-active">
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
						{*<input type="checkbox" id="toggle-action" name="toggle" checked />*}
					</div>
				</div>
				{* <button id="theme-toggle" class="btn btn-default" title="Toggle Dark Mode">ðŸŒ“</button> *}
				{*<div class="col-sm-3 col-xs-3 cursorPointer">
						<button id="applicationUpdater" class="btn btn-default update-tooltip" data-tooltip="Update Application">
							<img src="layouts/v7/skins//images/update-icon.svg" />
						 </button>
					</div> *}
			</div>
			<div class="navbar-header paddingTop5">
				<button type="button" class="navbar-toggle collapsed border0" data-toggle="collapse"
					data-target="#navbar" aria-expanded="false">
					<i class="fa fa-th"></i>
				</button>
				<button type="button" class="navbar-toggle collapsed border0" data-toggle="collapse"
					data-target="#search-links-container" aria-expanded="false">
					<i class="fa fa-search"></i>
				</button>
			</div>

			<div class="topbar-right">
				<div class="col-sm-5">
					<div id="search-links-container" class="search-links-container collapse navbar-collapse">
						<div class="search-link">
							<span class="fa fa-search" aria-hidden="true"></span>
							<input class="keyword-input" type="text" placeholder="{vtranslate('LBL_TYPE_SEARCH')}"
								value="{$GLOBAL_SEARCH_VALUE}">
							<span id="adv-search" class="adv-search fa fa-chevron-circle-down pull-right cursorPointer"
								aria-hidden="true"></span>
						</div>
					</div>
				</div>

				<div id="navbar" class="col-sm-6 col-xs-12 collapse navbar-collapse navbar-right global-actions">
					{* <div class="theme-switch-wrapper">
							<button type="button" data-theme-toggle aria-label="Toggle dark mode" class="theme-toggle-btn">
								<i class="fa-solid fa-moon"></i>
							</button>
						</div> *}
					<ul class="nav navbar-nav top-navbar">
						<li>
							<div class="dropdown pull-left">
								<div class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
									<a href="#" id="menubar_quickCreate" class="qc-button fa fa-solid fa-plus"
										title="{vtranslate('LBL_QUICK_CREATE',$MODULE)}" aria-hidden="true"></a>
								</div>
								<ul class="dropdown-menu dropdown-menu-container" role="menu"
									aria-labelledby="dropdownMenu1">
									<div class="quick-create">
										<li class="title" style="padding: 5px 0 0 15px;">
											<h5>{vtranslate('LBL_QUICK_CREATE',$MODULE)}</h5>
										</li>
										<hr />
										<li id="quickCreateModules" style="padding: 0 5px;">
											<div class="col-lg-12" style="padding-bottom:15px;">
												{assign var='count' value=0}
												{foreach key=moduleName item=moduleModel from=$QUICK_CREATE_MODULES}
													{if $moduleModel->isPermitted('CreateView') || $moduleModel->isPermitted('EditView')}
														{assign var='quickCreateModule' value=$moduleModel->isQuickCreateSupported()}
														{assign var='singularLabel' value=$moduleModel->getSingularLabelKey()}
														{assign var=hideDiv value={!$moduleModel->isPermitted('CreateView') && $moduleModel->isPermitted('EditView')}}
														{if $quickCreateModule == '1'}
															{if $count % 3 == 0}
																<div class="row quick-creat-list">
																{/if}
																{* Adding two links,Event and Task if module is Calendar *}
																{if $singularLabel == 'SINGLE_Calendar'}
																	{assign var='singularLabel' value='LBL_TASK'}
																	<div
																		class="{if $hideDiv}create_restricted_{$moduleModel->getName()} hide{else}col-lg-4 col-md-4 col-xs-6{/if}">
																		<a id="menubar_quickCreate_Events" class="quickCreateModule"
																			data-name="Events"
																			data-url="index.php?module=Events&view=QuickCreateAjax"
																			href="javascript:void(0)">{$moduleModel->getModuleIcon('Event')}<span
																				class="quick-create-module">{vtranslate('LBL_EVENT',$moduleName)}</span></a>
																	</div>
																	{if $count % 3 == 2}
																	</div>

																	<div class="row quick-creat-list">
																	{/if}
																	<div
																		class="{if $hideDiv}create_restricted_{$moduleModel->getName()} hide{else}col-lg-4 col-md-4 col-xs-6{/if}">
																		<a id="menubar_quickCreate_{$moduleModel->getName()}"
																			class="quickCreateModule"
																			data-name="{$moduleModel->getName()}"
																			data-url="{$moduleModel->getQuickCreateUrl()}"
																			href="javascript:void(0)">{$moduleModel->getModuleIcon('Task')}<span
																				class="quick-create-module">{vtranslate($singularLabel,$moduleName)}</span></a>
																	</div>
																	{if !$hideDiv}
																		{assign var='count' value=$count+1}
																	{/if}
																{else if $singularLabel == 'SINGLE_Documents'}
																	<div
																		class="{if $hideDiv}create_restricted_{$moduleModel->getName()} hide{else}col-lg-4 col-md-4 col-xs-6{/if} dropdown">
																		<a id="menubar_quickCreate_{$moduleModel->getName()}"
																			class="quickCreateModuleSubmenu dropdown-toggle"
																			data-name="{$moduleModel->getName()}" data-toggle="dropdown"
																			data-url="{$moduleModel->getQuickCreateUrl()}"
																			href="javascript:void(0)">
																			{$moduleModel->getModuleIcon()}
																			<span class="quick-create-module">
																				{vtranslate($singularLabel,$moduleName)}
																				<i
																					class="fa fa-caret-down quickcreateMoreDropdownAction"></i>
																			</span>
																		</a>
																		<ul class="dropdown-menu quickcreateMoreDropdown"
																			aria-labelledby="menubar_quickCreate_{$moduleModel->getName()}">
																			<li class="dropdown-header"><i class="fa fa-upload"></i>
																				{vtranslate('LBL_FILE_UPLOAD', $moduleName)}</li>
																			<li id="VtigerAction">
																				<a
																					href="javascript:Documents_Index_Js.uploadTo('Vtiger')">
																					<img style="  margin-top: -3px;margin-right: 4%;"
																						title="Vtiger" alt="Vtiger"
																						src="layouts/v7/skins//images/Vtiger.png">
																					{vtranslate('LBL_TO_SERVICE', $moduleName, {vtranslate('LBL_VTIGER', $moduleName)})}
																				</a>
																			</li>
																			<li class="dropdown-header"><i class="fa fa-link"></i>
																				{vtranslate('LBL_LINK_EXTERNAL_DOCUMENT', $moduleName)}
																			</li>
																			<li id="shareDocument"><a
																					href="javascript:Documents_Index_Js.createDocument('E')">&nbsp;<i
																						class="fa fa-external-link"></i>&nbsp;&nbsp;
																					{vtranslate('LBL_FROM_SERVICE', $moduleName, {vtranslate('LBL_FILE_URL', $moduleName)})}</a>
																			</li>
																			<li role="separator" class="divider"></li>
																			<li id="createDocument"><a
																					href="javascript:Documents_Index_Js.createDocument('W')"><i
																						class="fa fa-file-text"></i>
																					{vtranslate('LBL_CREATE_NEW', $moduleName, {vtranslate('SINGLE_Documents', $moduleName)})}</a>
																			</li>
																		</ul>
																	</div>
																{else}
																	<div
																		class="{if $hideDiv}create_restricted_{$moduleModel->getName()} hide{else}col-lg-4 col-md-4 col-xs-6{/if}">
																		<a id="menubar_quickCreate_{$moduleModel->getName()}"
																			class="quickCreateModule"
																			data-name="{$moduleModel->getName()}"
																			data-url="{$moduleModel->getQuickCreateUrl()}"
																			href="javascript:void(0)">
																			{$moduleModel->getModuleIcon()}
																			<span
																				class="quick-create-module">{vtranslate($singularLabel,$moduleName)}</span>
																		</a>
																	</div>
																{/if}
																{if $count % 3 == 2}
																</div>

															{/if}
															{if !$hideDiv}
																{assign var='count' value=$count+1}
															{/if}
														{/if}
													{/if}
												{/foreach}
											</div>
										</li>
									</div>
								</ul>
							</div>
						</li>
						{assign var=USER_PRIVILEGES_MODEL value=Users_Privileges_Model::getCurrentUserPrivilegesModel()}
						{assign var=CALENDAR_MODULE_MODEL value=Vtiger_Module_Model::getInstance('Calendar')}
						{if $USER_PRIVILEGES_MODEL->hasModulePermission($CALENDAR_MODULE_MODEL->getId())}
							<li>
								<div><a href="index.php?module=Calendar&view={$CALENDAR_MODULE_MODEL->getDefaultViewName()}"
										class="fa fa-calendar" title="{vtranslate('Calendar','Calendar')}"
										aria-hidden="true"></a></div>
							</li>
						{/if}
						{assign var=REPORTS_MODULE_MODEL value=Vtiger_Module_Model::getInstance('Reports')}
						{if $USER_PRIVILEGES_MODEL->hasModulePermission($REPORTS_MODULE_MODEL->getId())}
							<li>
								<div><a href="index.php?module=Reports&view=List" class="fa fa-bar-chart"
										title="{vtranslate('Reports','Reports')}" aria-hidden="true"></a></div>
							</li>
						{/if}
						{if $USER_PRIVILEGES_MODEL->hasModulePermission($CALENDAR_MODULE_MODEL->getId())}
							<li>
								<div><a href="#" class="taskManagement vicon vicon-task"
										title="{vtranslate('Tasks','Vtiger')}" aria-hidden="true"></a></div>
							</li>
						{/if}
						<li class="dropdown">
							<div>
								<a href="#" class="userName dropdown-toggle pull-right" data-toggle="dropdown"
									role="button">
									<span class="" aria-hidden="true" title="{$USER_MODEL->get('userlabel')}
										  ({$USER_MODEL->get('user_name')})"><img class="profile-icon"
											src="layouts/v7/skins//images/profile-icon.jpg" /></span>
									<span
										class="link-text-xs-only hidden-lg hidden-md hidden-sm">{$USER_MODEL->getName()}</span>
								</a>
								<div class="dropdown-menu logout-content" role="menu">
									<div class="admin-dropdown">
										<div class="admin-container">
											<div class="">
												<div class="profile-img-container">
													{assign var=IMAGE_DETAILS value=$USER_MODEL->getImageDetails()}
													{if $IMAGE_DETAILS neq '' && $IMAGE_DETAILS[0] neq '' && $IMAGE_DETAILS[0].path eq ''}
														<i class='vicon-vtigeruser' style="font-size:65px"></i>
													{else}
														{foreach item=IMAGE_INFO from=$IMAGE_DETAILS}
															{if !empty($IMAGE_INFO.url)}
																<img src="{$IMAGE_INFO.url}" width="100px" height="100px">
															{/if}
														{/foreach}
													{/if}
												</div>
											</div>
											<div class="">
												<div class="profile-container">
													<h5 class="profile-user">{$USER_MODEL->get('first_name')}
														{$USER_MODEL->get('last_name')}</h5>
													<p class="textOverflowEllipsis profile-roles"
														title='{$USER_MODEL->get('user_name')}'>
														{$USER_MODEL->get('user_name')}</p>
													<p class="profile-roles">{$USER_MODEL->getUserRoleName()}</p>
												</div>
											</div>
										</div>
										<div id="logout-footer" class="logout-footer clearfix">
											<hr style="margin: 10px 0 !important">
											<div class="">
												<span class="pull-left">
													<span class="fa fa-cogs"></span>
													<a id="menubar_item_right_LBL_MY_PREFERENCES" class="my-preferences"
														href="{$USER_MODEL->getPreferenceDetailViewUrl()}">{vtranslate('LBL_MY_PREFERENCES')}</a>
												</span>
												<span class="pull-right sign-out-btn">
													<span class="fa fa-power-off"></span>
													<a id="menubar_item_right_LBL_SIGN_OUT"
														href="index.php?module=Users&action=Logout">{vtranslate('LBL_SIGN_OUT')}</a>
												</span>
											</div>
										</div>
									</div>

								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
{* /strip removed *}